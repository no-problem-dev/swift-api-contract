{"seeAlsoSections":[{"identifiers":["doc:\/\/APIContract\/documentation\/APIContract\/GettingStarted"],"anchor":"はじめに","title":"はじめに","generated":true}],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","type":"heading","level":2,"text":"Overview"},{"type":"paragraph","inlineContent":[{"text":"このガイドでは、APIContractの各マクロの詳細な使い方と、様々なパターンのエンドポイント定義を説明します。","type":"text"}]},{"type":"heading","anchor":"Endpoint%E3%83%9E%E3%82%AF%E3%83%AD","text":"@Endpointマクロ","level":2},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"@Endpoint"},{"text":"マクロは、構造体をAPIエンドポイントに変換します。","type":"text"}]},{"type":"heading","anchor":"%E5%9F%BA%E6%9C%AC%E6%A7%8B%E6%96%87","text":"基本構文","level":3},{"type":"codeListing","syntax":"swift","code":["@Endpoint(.httpMethod, path: \"optional\/sub\/path\")","struct EndpointName {","    \/\/ パラメータ定義","    typealias Output = ResponseType","}"]},{"type":"heading","anchor":"HTTP%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89","text":"HTTPメソッド","level":3},{"type":"paragraph","inlineContent":[{"text":"サポートされるHTTPメソッド：","type":"text"}]},{"type":"table","rows":[[[{"type":"paragraph","inlineContent":[{"text":"メソッド","type":"text"}]}],[{"inlineContent":[{"type":"text","text":"用途"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":".get","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"text":"リソースの取得","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":".post"}],"type":"paragraph"}],[{"inlineContent":[{"text":"リソースの作成","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":".put"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"リソースの完全更新"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":".patch"}],"type":"paragraph"}],[{"inlineContent":[{"text":"リソースの部分更新","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":".delete"}],"type":"paragraph"}],[{"inlineContent":[{"text":"リソースの削除","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":".head"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"ヘッダーのみ取得"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":".options","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"許可メソッドの確認"}],"type":"paragraph"}]]],"header":"row"},{"type":"heading","anchor":"%E3%83%91%E3%82%B9%E6%8C%87%E5%AE%9A","text":"パス指定","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"パスは省略可能です。省略した場合、グループのベースパスが使用されます。"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ パスなし → グループのベースパスのみ","@Endpoint(.get)","struct List { ... }","","\/\/ パスあり → グループのベースパス + サブパス","@Endpoint(.get, path: \":id\")","struct Get { ... }","","\/\/ 複雑なパス","@Endpoint(.get, path: \":userId\/posts\/:postId\/comments\")","struct GetComments { ... }"]},{"type":"heading","anchor":"%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%83%9E%E3%82%AF%E3%83%AD","text":"パラメータマクロ","level":2},{"type":"heading","anchor":"PathParam","text":"@PathParam","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"URLパス内のプレースホルダーに対応するパラメータを定義します。"}]},{"type":"codeListing","syntax":"swift","code":["@Endpoint(.get, path: \":userId\/posts\/:postId\")","struct GetPost {","    @PathParam var userId: String","    @PathParam var postId: String","","    typealias Output = Post","}","","\/\/ 生成されるパス: \/users\/123\/posts\/456","let endpoint = GetPost(userId: \"123\", postId: \"456\")"]},{"type":"heading","anchor":"QueryParam","text":"@QueryParam","level":3},{"type":"paragraph","inlineContent":[{"text":"URLクエリパラメータを定義します。","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["@Endpoint(.get)","struct SearchUsers {","    @QueryParam var query: String          \/\/ 必須","    @QueryParam var limit: Int?            \/\/ オプション","    @QueryParam(\"page_size\") var pageSize: Int?  \/\/ カスタム名","","    typealias Output = [User]","}","","\/\/ 生成されるURL: \/users?query=john&limit=10&page_size=20","let endpoint = SearchUsers(query: \"john\", limit: 10, pageSize: 20)"]},{"type":"heading","anchor":"Body","text":"@Body","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"リクエストボディを定義します。"},{"type":"codeVoice","code":"Encodable"},{"type":"text","text":"に準拠した型を使用します。"}]},{"type":"codeListing","syntax":"swift","code":["struct CreateUserRequest: Codable {","    let name: String","    let email: String","}","","@Endpoint(.post)","struct CreateUser {","    @Body var body: CreateUserRequest","","    typealias Output = User","}","","\/\/ リクエストボディがJSON形式でエンコードされる","let endpoint = CreateUser(body: CreateUserRequest(name: \"John\", email: \"john@example.com\"))"]},{"type":"heading","anchor":"%E5%9E%8B%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88","text":"型サポート","level":2},{"type":"heading","anchor":"%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%81%A7%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%83%BD%E3%81%AA%E5%9E%8B","text":"パラメータで使用可能な型","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"以下の型がパスパラメータとクエリパラメータで使用できます："}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"文字列"}]},{"type":"text","text":": "},{"code":"String","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"整数"}]},{"type":"text","text":": "},{"type":"codeVoice","code":"Int"},{"type":"text","text":", "},{"type":"codeVoice","code":"Int8"},{"type":"text","text":", "},{"type":"codeVoice","code":"Int16"},{"type":"text","text":", "},{"type":"codeVoice","code":"Int32"},{"type":"text","text":", "},{"type":"codeVoice","code":"Int64"},{"type":"text","text":", "},{"type":"codeVoice","code":"UInt"},{"type":"text","text":", "},{"type":"codeVoice","code":"UInt8"},{"type":"text","text":", "},{"type":"codeVoice","code":"UInt16"},{"type":"text","text":", "},{"type":"codeVoice","code":"UInt32"},{"type":"text","text":", "},{"type":"codeVoice","code":"UInt64"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"浮動小数点","type":"text"}],"type":"strong"},{"text":": ","type":"text"},{"type":"codeVoice","code":"Double"},{"text":", ","type":"text"},{"type":"codeVoice","code":"Float"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"真偽値","type":"text"}]},{"text":": ","type":"text"},{"type":"codeVoice","code":"Bool"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"日付","type":"text"}],"type":"strong"},{"text":": ","type":"text"},{"code":"Date","type":"codeVoice"},{"text":"（ISO8601形式で自動変換）","type":"text"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Enum"}],"type":"strong"},{"type":"text","text":": "},{"code":"RawRepresentable","type":"codeVoice"},{"type":"text","text":"な型"}],"type":"paragraph"}]}]},{"type":"codeListing","syntax":"swift","code":["enum Status: String {","    case active, inactive","}","","@Endpoint(.get)","struct FilterUsers {","    @QueryParam var status: Status","    @QueryParam var createdAfter: Date?","","    typealias Output = [User]","}"]},{"type":"heading","anchor":"%E7%89%B9%E6%AE%8A%E3%81%AA%E5%9E%8B","text":"特殊な型","level":3},{"type":"heading","anchor":"EmptyInput","text":"EmptyInput","level":4},{"type":"paragraph","inlineContent":[{"type":"text","text":"パラメータなしのエンドポイントに使用します。"}]},{"type":"codeListing","syntax":"swift","code":["@Endpoint(.get)","struct GetServerStatus {","    typealias Output = ServerStatus","}"]},{"type":"heading","anchor":"EmptyOutput","text":"EmptyOutput","level":4},{"type":"paragraph","inlineContent":[{"text":"レスポンスボディがないエンドポイント（DELETEなど）に使用します。","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["@Endpoint(.delete, path: \":id\")","struct DeleteUser {","    @PathParam var id: String","    typealias Output = EmptyOutput","}"]},{"type":"heading","anchor":"APIGroup%E3%83%9E%E3%82%AF%E3%83%AD","text":"@APIGroupマクロ","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"関連するエンドポイントをグループ化し、共通のベースパスと認証設定を定義します。"}]},{"type":"heading","anchor":"%E5%9F%BA%E6%9C%AC%E6%A7%8B%E6%96%87","text":"基本構文","level":3},{"type":"codeListing","syntax":"swift","code":["@APIGroup(path: \"\/v1\/resource\", auth: .required)","enum ResourceAPI {","    \/\/ エンドポイント定義","}"]},{"type":"heading","anchor":"%E8%AA%8D%E8%A8%BC%E8%A6%81%E4%BB%B6","text":"認証要件","level":3},{"type":"table","rows":[[[{"inlineContent":[{"type":"text","text":"値"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"説明"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":".none","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"text":"認証不要","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":".required","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"text":"認証必要","type":"text"}],"type":"paragraph"}]]],"header":"row"},{"type":"heading","anchor":"%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E5%8C%96%E3%81%AE%E4%BE%8B","text":"グループ化の例","level":3},{"type":"codeListing","syntax":"swift","code":["\/\/ ユーザーAPI","@APIGroup(path: \"\/v1\/users\", auth: .required)","enum UsersAPI {","    @Endpoint(.get) struct List { ... }","    @Endpoint(.get, path: \":id\") struct Get { ... }","    @Endpoint(.post) struct Create { ... }","    @Endpoint(.put, path: \":id\") struct Update { ... }","    @Endpoint(.delete, path: \":id\") struct Delete { ... }","}","","\/\/ 認証API（認証不要）","@APIGroup(path: \"\/v1\/auth\", auth: .none)","enum AuthAPI {","    @Endpoint(.post, path: \"login\") struct Login { ... }","    @Endpoint(.post, path: \"register\") struct Register { ... }","    @Endpoint(.post, path: \"refresh\") struct Refresh { ... }","}"]},{"type":"heading","anchor":"%E5%AE%8C%E5%85%A8%E3%81%AA%E4%BE%8B","text":"完全な例","level":2},{"type":"codeListing","syntax":"swift","code":["import APIContract","","\/\/ モデル定義","struct User: Codable {","    let id: String","    let name: String","    let email: String","}","","struct CreateUserRequest: Codable {","    let name: String","    let email: String","}","","struct UpdateUserRequest: Codable {","    let name: String?","    let email: String?","}","","\/\/ API定義","@APIGroup(path: \"\/v1\/users\", auth: .required)","enum UsersAPI {","    @Endpoint(.get)","    struct List {","        @QueryParam var limit: Int?","        @QueryParam var offset: Int?","        @QueryParam var status: String?","","        typealias Output = [User]","    }","","    @Endpoint(.get, path: \":userId\")","    struct Get {","        @PathParam var userId: String","","        typealias Output = User","    }","","    @Endpoint(.post)","    struct Create {","        @Body var body: CreateUserRequest","","        typealias Output = User","    }","","    @Endpoint(.patch, path: \":userId\")","    struct Update {","        @PathParam var userId: String","        @Body var body: UpdateUserRequest","","        typealias Output = User","    }","","    @Endpoint(.delete, path: \":userId\")","    struct Delete {","        @PathParam var userId: String","","        typealias Output = EmptyOutput","    }","}"]}]}],"metadata":{"role":"article","modules":[{"name":"APIContract"}],"roleHeading":"Article","title":"エンドポイントの定義","color":{"standardColorIdentifier":"blue"}},"hierarchy":{"paths":[["doc:\/\/APIContract\/documentation\/APIContract"]]},"sections":[],"identifier":{"url":"doc:\/\/APIContract\/documentation\/APIContract\/DefiningEndpoints","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"APIContractでエンドポイントを定義する詳細なガイド。"}],"kind":"article","schemaVersion":{"patch":0,"major":0,"minor":3},"variants":[{"paths":["\/documentation\/apicontract\/definingendpoints"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://APIContract/documentation/APIContract/GettingStarted":{"role":"article","abstract":[{"text":"APIContractを使用してAPIエンドポイントを定義する方法を学びます。","type":"text"}],"identifier":"doc:\/\/APIContract\/documentation\/APIContract\/GettingStarted","url":"\/documentation\/apicontract\/gettingstarted","type":"topic","kind":"article","title":"はじめに"},"doc://APIContract/documentation/APIContract":{"role":"collection","identifier":"doc:\/\/APIContract\/documentation\/APIContract","title":"APIContract","url":"\/documentation\/apicontract","abstract":[{"text":"Swiftマクロを活用した型安全なAPIコントラクト定義ライブラリ。","type":"text"}],"kind":"symbol","type":"topic"}}}